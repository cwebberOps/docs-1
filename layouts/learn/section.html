{{ define "hero" }}
    <header class="header-hero header-hero-dark pb-8 px-0 relative">
        <div class="absolute inset-0 -mx-2 z-10">
            <svg viewBox="0 0 1688 331" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g filter="url(#filter0_d)">
                    <path d="M4 0H1684C1684 211.842 1684 70.0914 1684 281.933C868.502 177.277 577.108 411.803 4 281.933V0Z" fill="url(#paint0_linear)"/>
                </g>
                <defs>
                    <filter id="filter0_d" x="0" y="0" width="1688" height="330.275" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>
                        <feOffset dy="4"/>
                        <feGaussianBlur stdDeviation="2"/>
                        <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>
                        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/>
                        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>
                    </filter>
                    <linearGradient id="paint0_linear" x1="844" y1="0" x2="844" y2="322.275" gradientUnits="userSpaceOnUse">
                        <stop stop-color="#2A1337"/>
                        <stop offset="1" stop-color="#371A47"/>
                    </linearGradient>
                </defs>
            </svg>
        </div>
        <div class="mx-auto text-center relative z-20">
            <h1 class="font-bold font-body">{{ .Title }}</h1>
            <p class="text-xl leading-relaxed text-purple-100 max-w-md mx-auto">
                {{ .Description }}
            </p>
            <img src="/images/learn/lightningpus.svg" class="mt-2 mb-12 w-40 inline-block mx-auto" alt="">
        </div>
    </header>
{{ end }}

{{ define "main" }}
    {{ $sectionPages := where .Site.Pages ".Type" "learn" }}
    {{ $modules := where .Site.Pages "Params.layout" "module" }}
    {{ $topics := where .Site.Pages "Params.layout" "topic" }}

    {{ range $modules }}
        {{ $modulePath := path.Dir .Path }}
        {{ $moduleTopics := slice }}

        {{ range $topics }}
            {{ $topicPath := path.Dir .Path }}
            {{ if hasPrefix $topicPath $modulePath }}
                {{ $moduleTopics = $moduleTopics | append . }}
            {{ end }}
        {{ end }}

        <div class="bg-purple-800 m-0 p-0 text-purple-100">
            <section id="modules">
                <div class="container mx-auto md:flex flex-wrap py-4 justify-center">
                    <div class="md:w-1/3 rounded m-4 shadow hover:shadow-xl">
                        {{ if .Params.meta_image }}
                            <a href="{{ .RelPermalink }}">
                                <img
                                    class="rounded-t border-b border-gray-300"
                                    src="{{ (.Resources.GetMatch .Params.meta_image).RelPermalink }}"
                                alt="{{ .Title }}">
                            </a>
                        {{ end }}
                        <div class="p-8 bg-white rounded-b">
                            <h3>
                                <a href="{{ .RelPermalink }}" class="text-blue-600 font-body">
                                    {{ .Title }}
                                </a>
                            </h3>
                            <p class="text-gray-700">
                                {{ .Description }}
                            </p>
                            <p class="text-gray-500 text-sm uppercase">
                                {{ len $moduleTopics }} topic{{ if ne (len $moduleTopics) 1}}s{{ end }}
                            </p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    {{ end }}
{{ end }}
